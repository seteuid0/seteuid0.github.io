<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>iptables on seteuid0's blog</title><link>/tags/iptables/</link><description>Recent content in iptables on seteuid0's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>This is a customized copyright.</copyright><lastBuildDate>Tue, 29 May 2018 02:57:58 +0000</lastBuildDate><atom:link href="/tags/iptables/index.xml" rel="self" type="application/rss+xml"/><item><title>firewalld配置到虚拟机的端口转发</title><link>/posts/firewalld%e9%85%8d%e7%bd%ae%e5%88%b0%e8%99%9a%e6%8b%9f%e6%9c%ba%e7%9a%84%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91/</link><pubDate>Tue, 29 May 2018 02:57:58 +0000</pubDate><guid>/posts/firewalld%e9%85%8d%e7%bd%ae%e5%88%b0%e8%99%9a%e6%8b%9f%e6%9c%ba%e7%9a%84%e7%ab%af%e5%8f%a3%e8%bd%ac%e5%8f%91/</guid><description>场景如下，假定服务器有公网IP，不同的业务可能运行到不同的虚拟机上，通过在服务器上配置不同的端口转发使请求转发到不同的虚拟机中。 实验环境如下：
host： fedora27 guest: fedora27，ip是192.0.2.55 步骤：``` #获取当前zone firewall-cmd &amp;ndash;get-active-zones #假定获取的zone为external,fedora返回的是FedoraWorkstation firewall-cmd &amp;ndash;zone=external &amp;ndash;add-masquerade #把host上的22端口转到192.0.2.55地址的2055端口 firewall-cmd &amp;ndash;zone=external &amp;ndash;add-forward-port=port=22:proto=tcp:toport=2055:toaddr=192.0.2.55 firewall-cmd &amp;ndash;reload #需要确认ip_forward处于开启状态 net.ipv4.ip_forward = 1 检查虚拟机的防火墙开起来对应的端口，或者干脆关闭防火墙。 #其他的命令 firewall-cmd &amp;ndash;zone=external &amp;ndash;add-forward-port=port=22:proto=tcp:toport=3753 firewall-cmd &amp;ndash;zone=external &amp;ndash;add-forward-port=port=22:proto=tcp:toaddr=192.0.2.55 查看： firewall-cmd &amp;ndash;list-all firewall-cmd &amp;ndash;zone=external &amp;ndash;list-forward-ports 当然也可以使用qemu来实现端口转发，这里就不展开了。</description></item></channel></rss>