<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ubuntu on seteuid0's blog</title><link>/tags/ubuntu/</link><description>Recent content in ubuntu on seteuid0's blog</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>This is a customized copyright.</copyright><lastBuildDate>Mon, 02 Nov 2015 13:37:37 +0000</lastBuildDate><atom:link href="/tags/ubuntu/index.xml" rel="self" type="application/rss+xml"/><item><title>ubuntu 15.10上运行无法vmware解决办法</title><link>/posts/how-to-run-vmware-on-ubuntu15-10/</link><pubDate>Mon, 02 Nov 2015 13:37:37 +0000</pubDate><guid>/posts/how-to-run-vmware-on-ubuntu15-10/</guid><description>今天把ubuntu系统升级到15.10，突然发现vmware虚拟机无法运行了，之前是11版本的，看之前一直提示12版本已经发布，就先把vmware升级了一下，结果还是没有办法运行（运行vmware没有显示）。 研究、搜索了半天，解决办法如下： 方法1：在终端执行如下动态库设置，然后再运行vmware或vmplayerexport LD_LIBRARY_PATH=/usr/lib/vmware/lib/libglibmm-2.4.so.1/:$LD_LIBRARY_PATH方法2：编辑/usr/bin/vmware，添加export LD\_LIBRARY\_PATH=/usr/lib/vmware/lib/libglibmm-2.4.so.1再运行vmware，当然方法2一劳永逸^_^。 原来是vmware和vmplayer需要一些特殊的动态库，而这些动态库无疑和系统的动态库是冲突的，因此也只能是使用vmware的时候配置这些动态库，如果修改到环境变量里面，无疑会对其他的应用产生影响。 参考：``` https://communities.vmware.com/message/2547319 http://askubuntu.com/questions/689123/vmware-wont-work-after-ubuntu-upgrade</description></item><item><title>Linux使用ＨＰ打印机配置方式总结</title><link>/posts/linux%e4%bd%bf%e7%94%a8%ef%bc%a8%ef%bc%b0%e6%89%93%e5%8d%b0%e6%9c%ba%e9%85%8d%e7%bd%ae%e6%96%b9%e5%bc%8f%e6%80%bb%e7%bb%93/</link><pubDate>Thu, 17 Sep 2015 10:02:01 +0000</pubDate><guid>/posts/linux%e4%bd%bf%e7%94%a8%ef%bc%a8%ef%bc%b0%e6%89%93%e5%8d%b0%e6%9c%ba%e9%85%8d%e7%bd%ae%e6%96%b9%e5%bc%8f%e6%80%bb%e7%bb%93/</guid><description>Linux下处理打印机的服务是CUPS，但支持不通型号的打印机还是需要各个打印机相关的一些驱动做支撑。最近就使用ubuntu链接一台HP LaserJet Pro MFP M226dw，把中间碰到问题的解决办法记录如下： 连接打印机的方法有很多种，USB、网络、无线等，我使用的方法是网线，即笔记本和HP打印机都连接在一个交换机上面。 1、打印问题 使用cups添加设备的时候，cups可以自动找到打印机，但是连接的类型里面只有&amp;quot;AppSocket/HP JetDirect&amp;quot;等方式，没有办法看到HPLIP的连接类型。这个时候就需要安装HP相关的“驱动” 去网页：http://hplipopensource.com/hplip-web/install_wizard/index.html 依据自己的打印机型号寻找hplip文件，下载后进行安装。 安装以后使用cups就可以看到HPLIP的连接选项了，使用该连接选项连接打印机。打印测试页，一切正常，所以打印机已经工作正常。 2、扫描功能 有时难免会用到扫描功能，cups缺少相关的功能。 使用hp-toolbox命令就可以调出刚刚hplip包提供的工具集了，点击Actions-&amp;gt;Scan里面的就会出现扫描工具。 这时可能会提示需要安装二进制的插件。我用的是hplip-3.15.9，plugin安装貌似有问题，自动下载安装无法完成。搜寻半天，发现可以在https://www.openprinting.org/download/printdriver/auxfiles/HP/plugins/ 页面里找到对应的plugins，下载安装。scan功能一切正常。 搜索关键字：“ERROR:Plug-in file does not match its digital signature.”</description></item><item><title>[zz]Debian / Ubuntu tasksel: Install Group Software (tasks) such As DNS / Web Server In A Single Click</title><link>/posts/zzdebian-ubuntu-tasksel-install-group-software-tasks-such-as-dns-web-server-in-a-single-click/</link><pubDate>Mon, 15 Jun 2015 14:53:19 +0000</pubDate><guid>/posts/zzdebian-ubuntu-tasksel-install-group-software-tasks-such-as-dns-web-server-in-a-single-click/</guid><description>&amp;rsquo;m looking for &amp;lsquo;yum groupinstall group&amp;rsquo; like command under Debian or Ubuntu Linux. How do I install group of softwares such as DNS or LAMP server in a single command? You need to use tasksel command. It is a software installation application that is an integral part of the Debian installer and works under Ubuntu Linux too. It groups some packages by tasks and offers the user an easy way to install the packages for that task.</description></item><item><title>串口登陆类ubuntu系统设置方法</title><link>/posts/serail_console_login_ubuntu_howto/</link><pubDate>Tue, 24 Mar 2015 16:22:51 +0000</pubDate><guid>/posts/serail_console_login_ubuntu_howto/</guid><description>在调试嵌入式等设备的时候，难免需要使用串口来登陆系统，ubuntu模式配置是没有启用串口登陆的，以下将简要介绍如何开启串口登陆。 在较高（12.04以后？）中，基于upstart的启动环境中使用/etc/init下面创建的启动脚本。如tty0～tty7都有相关的配置文件tty[0&amp;hellip;7].conf。如果需要启用串口登陆，只需要对应的创建一个新的文件，例如你使用的串口是ttyS0,则新建ttyS0.conf文件。 填写如下内容到该配置文件(注意里面的115200即串口的波特率。``` # ttyS0 - getty
This service maintains a getty on ttyS0 from the point the system is started until it is shut down again. start on stopped rc or RUNLEVEL=[12345] stop on runlevel [!12345]
respawn exec /sbin/getty -L 115200 ttyS0 vt102 这样连接串口重新启动进行验证吧，当然也可以不重启，通过执行以下命令实现： sudo start ttyS0</description></item><item><title>ubuntu安装光盘iso修改方法总结</title><link>/posts/ubuntu%e5%ae%89%e8%a3%85%e5%85%89%e7%9b%98iso%e4%bf%ae%e6%94%b9%e6%96%b9%e6%b3%95%e6%80%bb%e7%bb%93/</link><pubDate>Wed, 04 Feb 2015 06:19:10 +0000</pubDate><guid>/posts/ubuntu%e5%ae%89%e8%a3%85%e5%85%89%e7%9b%98iso%e4%bf%ae%e6%94%b9%e6%96%b9%e6%b3%95%e6%80%bb%e7%bb%93/</guid><description>可以使用mount命令查看iso的内容#mkdir iso #mount -o loop ubuntu.iso ./iso把iso里面的内容取出来,iso_modify#mkdir iso\_modify #rsync -az ./iso ./iso\_modifyIso目录里面的casper/filesystem.squashfs就是启动以后的虚拟文件系统，我们要修改的就是这里的内容。#mkdir squashfs #cp iso/casper/filesystem.squashfs ./squashfs #cd squashfs解压squashfs#unsquashfs filesystem.squashfs可以看到解压出的squashfs-root目录就是一个文件系统，针对性的进行修改，如果需要安装deb包，可以chroot进去使用dpkg进行安装。 如果安装了软件包，需要跟新dpkg的列表：#chroot squashfs-root/ dpkg-query -W --showformat='${Package}\\t${Version}\\n' &amp;gt; dpkg\_list #cp dpkg\_list ../../iso\_modify/casper/filesystem.manifest把squashfs-root目录从新制作成squashfs文件#mksquashfs squashfs-root filesystem.squashfs -b 1024k -comp xz -Xbcj x86 -e boot用新的filesystem.squashfs替换原来的文件。 把新的iso-modify打包成iso``` #mkisofs -r -V &amp;ldquo;UbuntuTest&amp;rdquo; -cache-inodes -J -l -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -o ../ubuntu-test.iso .</description></item><item><title>ubuntu下initramfs相关内容记录</title><link>/posts/ubuntu%e4%b8%8binitramfs%e7%9b%b8%e5%85%b3%e5%86%85%e5%ae%b9%e8%ae%b0%e5%bd%95/</link><pubDate>Mon, 02 Feb 2015 16:54:53 +0000</pubDate><guid>/posts/ubuntu%e4%b8%8binitramfs%e7%9b%b8%e5%85%b3%e5%86%85%e5%ae%b9%e8%ae%b0%e5%bd%95/</guid><description>为了适应不同的运行环境，Linux发行版的启动基本都分为两个阶段，第一阶段使用initramfs文件系统，加载所需要的硬件驱动、文件系统驱动等；当完成根文件系统挂载后执行chroot，进入真实的文件系统。 initramfs类似与一个极其简化的文件系统，里面包含了系统启动时驱动的最小集合，这样使得initramfs的体积尽可能的变小。但不同发行版本的initramfs中内容的制作方式不尽相同，例如在fedora、rhel、centos的版本中，使用dracut工具包来生成相对应的initrd，而在ubuntu系统中使用initramfs-tools工具包所提供的相关工具。 当安装内核、内核升级的时候，内核的postinst脚本会在安装结束后调用update-initramfs工具更新相关的initramfs文件。查看update-initramfs文件发现，其主要调用mkinitramfs来完成相关操作。 update-initramfs与mkinitramfs文件都是BASH脚本文件，mkinitramfs文件基于事先约定的规则拷贝相关的程序、库、脚本、配置等到特定的目录，然后打包成initramfs格式的文件。mkinitramfs文件会引用/usr/share/initramfs-tools/hook-functions中事先约定好的函数，例如copy_exec可以完成二进制程序的拷贝，同时拷贝该程序所以来的动态库。/usr/share/initramfs-tools/scripts/目录中存放着生成initramfs中所需要的脚本。 修改//usr/sbin/mkinitramfs或者其他相关的内容，自己重新生成一个initramfs文件和之前的对比下，就可以看到效果。 例如：mkinitramfs -o test.img即可使用当前运行的内核版本生成一个对应的initramfs文件。 initramfs-tools软件包中除了mkinitramfs、update-initramfs工具外还有lsinitramfs等工具来帮助用户进行操作。 当然，最后生成的initramfs.img文件只是一种打包好的文件而已，方便grub加载及运行，我们也可自行进行解压、修改、再打包。 命令大致如下： 解压：zcat in.img |cpio -dium 打包：find . |cpio -H newc -o |gzip -9 &amp;gt; out.img</description></item><item><title>简要ClamAV安装、使用与实现分析</title><link>/posts/clamav_use_implement/</link><pubDate>Thu, 06 Mar 2014 10:52:57 +0000</pubDate><guid>/posts/clamav_use_implement/</guid><description>ClamAV使用广泛且开源的杀毒软件，支持windows、linux、Unix等主流操作系统，除自身具有病毒查杀功能外，还支持邮件、http代理扫描等插件方式。
安装 由于ClamAV的广泛使用，很多发行版的源里都有clamav，只需要使用相应的包管理工具进行安装即可。如fedora或ubuntu下只需执行：
yum install -y clamav-* sudo apt-get install clamav-*
但然，你也可以源码包安装，网上有很多教程，这里就不在多说。
使用 杀毒软件最终要的当然是病毒库，使用前当然是更新最新的病毒库。
freshclam
ClamAv有2种使用模式，单个程序查杀和前、后台模式查杀。 clamscan就是单个程序查杀的程序，它调用libclamav库完成对指定目录、文件的扫描检查。 clamd、clamdscan是前、后台模式的查杀工具。从名字就可以看出clamd是提供查杀服务的daemon程序，clamdscan是调用查杀服务的客户端。 最简单的使用方式就是命令后加你要扫描的文件或目录，如：
 clamdscan ～/
ClamAv当然也支持很多参数进行扫描定制，这里略过。 除了命令行的工具外还有很多第三方的图形化工具，如clamtk，更多的见：http://www.clamav.net/lang/en/download/third-party-tools/3rdparty-gui/
实现分析 ClamAv实现的是最原始的特征码扫描，而加载特征码库与实现扫描功能的代码都在libclamav库中实现，两种使用模式都是调用该库完成对应的扫描功能。 libclamav库API提供了病毒扫描的各种函数接口。从病毒中提取的特征字符串被用一定的格式组织在一起并加上签名保护就形成了病毒库，clamav使用的病毒库一般后缀为.cvd文件。 libclamav库的病毒扫描法使用Aho-Corasick精确字符串匹配算法，将病毒库中的特征码与文件中的字符串进行比较，以确定文件中是否有字符串精确匹配上病毒库中的特征码，从而确定是否感染病毒。 Aho-Corasick在Boyer-Moore算法基础上进行了的多种改进，Boyer Moore算法对要搜索的字符串进行逆序字符比较，当被搜索的字符串中的字符在特征字符串中不存在时，将跳过搜索字符串中一个子段。Boyer Moore算法还利用上一次比较的结果来确定下一次的比较位置，Boyer Moore算法与线性搜索比起来每次移动的步长比较多，线性搜索每次移动一个字符，因此，Boyer Moore算法比线性搜索快得多。Aho-Corasick通过创建一种状态图并采用由软件实现的有限状态机来确定字符串在文本中的位置，消除了搜索性能与字符串数量的相关性。 当然ClamAV必须实现相应的两个算法，看如下数据结构：
struct cli_matcher { unsigned int type; /* Extended Boyer-Moore */ uint8_t *bm_shift; struct cli_bm_patt **bm_suffix, **bm_pattab; uint32_t *soff, soff_len; /* for PE section sigs */ uint32_t bm_offmode, bm_patterns, bm_reloff_num, bm_absoff_num; /* HASH */ struct cli_hash_patt hm; /* Extended Aho-Corasick */ uint32_t ac_partsigs, ac_nodes, ac_patterns, ac_lsigs; struct cli_ac_lsig **ac_lsigtable; struct cli_ac_node *ac_root, **ac_nodetable; struct cli_ac_patt **ac_pattable; struct cli_ac_patt **ac_reloff; uint32_t ac_reloff_num, ac_absoff_num; uint8_t ac_mindepth, ac_maxdepth; struct filter *filter; uint16_t maxpatlen; uint8_t ac_only; #ifdef USE_MPOOL mpool_t *mempool; #endif };</description></item><item><title>ubuntu12.4硬盘安装</title><link>/posts/ubuntu124_hard_disk_installation/</link><pubDate>Tue, 10 Sep 2013 13:16:00 +0000</pubDate><guid>/posts/ubuntu124_hard_disk_installation/</guid><description>下载镜像后，提取下载镜像casper文件夹下的vmlinuz initrd.lz放到系统盘的根目录下，ubuntu12.04的安装镜像则保存为linux.iso也放在系统盘下。然后修改或手工收入grub参数启动如果是grub2.0,则为set root=(hd0&amp;hellip;.)使用自动补全即可linux /vmlinuz&amp;hellip;其他相同</description></item></channel></rss>